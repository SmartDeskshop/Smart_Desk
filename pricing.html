<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pricing - SmartDesk</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <style>
    :root {
      --primary-color: #4361ee;
      --primary-dark: #3a56d4;
      --secondary-color: #3f37c9;
      --light-gray: #f8f9fa;
      --medium-gray: #e9ecef;
      --dark-gray: #495057;
      --text-color: #212529;
      --success-color: #2e7d32;
      --success-bg: #e6f4ea;
      --error-color: #d32f2f;
      --error-bg: #fdecea;
      --shadow-sm: 0 1px 3px rgba(0,0,0,0.12);
      --shadow-md: 0 4px 6px rgba(0,0,0,0.1);
      --shadow-lg: 0 10px 25px rgba(0,0,0,0.1);
      --border-radius: 8px;
      --transition: all 0.3s ease;
      
      /* Dark mode variables */
      --bg-color: #ffffff;
      --header-bg: #ffffff;
      --card-bg: #ffffff;
      --text-primary: #212529;
      --border-color: #e9ecef;
    }

    .dark-mode {
      --bg-color: #121212;
      --header-bg: #1e1e1e;
      --card-bg: #1e1e1e;
      --text-primary: #f8f9fa;
      --border-color: #333333;
      --light-gray: #2d2d2d;
      --medium-gray: #3d3d3d;
      --dark-gray: #e9ecef;
      --text-color: #f8f9fa;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Inter', sans-serif;
      background-color: var(--bg-color);
      color: var(--text-primary);
      line-height: 1.6;
      transition: var(--transition);
    }

    /* Header Styles */
    .main-header {
      background-color: var(--header-bg);
      box-shadow: var(--shadow-sm);
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 100;
      transition: var(--transition);
    }

    .logo {
      font-weight: 700;
      font-size: 1.5rem;
      color: var(--primary-color);
      text-decoration: none;
      display: flex;
      align-items: center;
    }

    .logo i {
      margin-right: 0.5rem;
    }

    .user-info {
      display: flex;
      align-items: center;
      gap: 1.5rem;
    }

    .user-details {
      text-align: right;
    }

    .user-name {
      font-weight: 600;
      color: var(--text-primary);
    }

    .user-email {
      font-size: 0.85rem;
      color: var(--dark-gray);
    }

    .current-time {
      font-size: 0.85rem;
      color: var(--dark-gray);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background-color: var(--primary-color);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      text-transform: uppercase;
    }

    .theme-toggle {
      background: none;
      border: none;
      color: var(--text-primary);
      cursor: pointer;
      font-size: 1.2rem;
      margin-left: 1rem;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 3rem 2rem;
    }

    .header {
      text-align: center;
      margin-bottom: 4rem;
    }

    .header h1 {
      color: var(--primary-color);
      font-size: 2.75rem;
      font-weight: 700;
      margin-bottom: 1rem;
    }

    .header p {
      font-size: 1.1rem;
      color: var(--dark-gray);
      max-width: 600px;
      margin: 0 auto;
    }

    .pricing-cards {
      display: flex;
      justify-content: center;
      gap: 2rem;
      flex-wrap: wrap;
    }

    .pricing-card {
      background: var(--card-bg);
      border-radius: var(--border-radius);
      padding: 2.5rem 2rem;
      width: 100%;
      max-width: 320px;
      box-shadow: var(--shadow-md);
      position: relative;
      transition: var(--transition);
      border: 1px solid var(--border-color);
    }

    .pricing-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-lg);
      border-color: var(--primary-color);
    }

    .popular-badge {
      position: absolute;
      top: -12px;
      right: 20px;
      background: var(--primary-color);
      color: white;
      padding: 0.5rem 1.25rem;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      box-shadow: var(--shadow-sm);
    }

    .pricing-card h3 {
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: var(--text-primary);
    }

    .price {
      font-size: 2.75rem;
      font-weight: 700;
      color: var(--primary-color);
      margin: 1.5rem 0;
    }

    .price span {
      font-size: 1rem;
      font-weight: 400;
      color: var(--dark-gray);
    }

    .features {
      margin: 2rem 0;
      list-style: none;
    }

    .features li {
      margin-bottom: 1rem;
      display: flex;
      align-items: flex-start;
      color: var(--text-primary);
    }

    .features i {
      color: var(--primary-color);
      margin-right: 0.75rem;
      margin-top: 0.2rem;
      font-size: 0.9rem;
    }

    .btn {
      width: 100%;
      padding: 0.85rem;
      background-color: var(--primary-color);
      color: white;
      border: none;
      font-weight: 600;
      border-radius: var(--border-radius);
      cursor: pointer;
      transition: var(--transition);
      font-size: 1rem;
      letter-spacing: 0.5px;
      text-transform: uppercase;
    }

    .btn:hover {
      background-color: var(--primary-dark);
      box-shadow: var(--shadow-sm);
    }

    .btn:disabled {
      background-color: var(--medium-gray);
      color: var(--dark-gray);
      cursor: not-allowed;
    }

    .alert {
      padding: 1rem 1.5rem;
      margin: 1.5rem auto;
      border-radius: var(--border-radius);
      display: none;
      max-width: 800px;
      font-weight: 500;
    }

    .alert-success {
      background-color: var(--success-bg);
      color: var(--success-color);
      border-left: 4px solid var(--success-color);
    }

    .alert-danger {
      background-color: var(--error-bg);
      color: var(--error-color);
      border-left: 4px solid var(--error-color);
    }

    .toggle-container {
      display: flex;
      justify-content: center;
      margin-bottom: 2rem;
      align-items: center;
    }

    .toggle-label {
      margin: 0 1rem;
      font-weight: 500;
      color: var(--dark-gray);
    }

    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 60px;
      height: 34px;
    }

    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: .4s;
      border-radius: 34px;
    }

    .slider:before {
      position: absolute;
      content: "";
      height: 26px;
      width: 26px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }

    input:checked + .slider {
      background-color: var(--primary-color);
    }

    input:checked + .slider:before {
      transform: translateX(26px);
    }

    .faq-section {
      max-width: 800px;
      margin: 4rem auto 0;
    }

    .faq-section h2 {
      text-align: center;
      margin-bottom: 2rem;
      color: var(--primary-color);
    }

    .faq-item {
      margin-bottom: 1rem;
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      overflow: hidden;
      transition: var(--transition);
    }

    .faq-question {
      padding: 1.25rem;
      background-color: var(--card-bg);
      font-weight: 600;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: var(--text-primary);
    }

    .faq-answer {
      padding: 0 1.25rem;
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
      background-color: var(--light-gray);
      color: var(--text-primary);
    }

    .faq-answer.active {
      padding: 1.25rem;
      max-height: 500px;
    }

    /* Responsive styles */
    @media (max-width: 768px) {
      .container {
        padding: 2rem 1.5rem;
      }
      
      .header h1 {
        font-size: 2.25rem;
      }
      
      .pricing-cards {
        flex-direction: column;
        align-items: center;
      }
      
      .pricing-card {
        max-width: 100%;
      }

      .main-header {
        flex-direction: column;
        align-items: flex-start;
        padding: 1rem;
      }

      .user-info {
        width: 100%;
        justify-content: space-between;
        margin-top: 1rem;
        padding-top: 1rem;
        border-top: 1px solid var(--border-color);
      }
    }

    @media (max-width: 480px) {
      .user-details {
        display: none;
      }
    }
  </style>
</head>
<body>
  <header class="main-header">
    <a href="pricing.html" class="logo">
      <i class="fas fa-store"></i> SmartShop
    </a>
    
    <div class="user-info">
      <div class="user-details">
        <div class="user-name" id="user-name">Loading...</div>
        <div class="user-email" id="user-email">user@example.com</div>
      </div>
      
      <div class="current-time" id="current-time">
        <i class="far fa-clock"></i>
        <span id="time-display">00:00:00</span>
        <span id="date-display">Jan 1, 2023</span>
      </div>
      
      <div class="avatar" id="user-avatar">U</div>
      
      <button class="theme-toggle" id="theme-toggle" title="Toggle dark mode">
        <i class="fas fa-moon"></i>
      </button>
    </div>
  </header>

  <div class="container">
    <div class="header">
      <h1>Flexible Pricing Plans</h1>
      <p>Choose the perfect plan for your business needs. Scale up or down as needed with no long-term commitments.</p>
    </div>

    <div id="success-alert" class="alert alert-success"></div>
    <div id="error-alert" class="alert alert-danger"></div>

    <div class="pricing-cards">
      <div class="pricing-card">
        <h3>Starter</h3>
        <div class="price">₹0 <span>/ 14 days</span></div>
        <ul class="features">
<li><i class="fas fa-check"></i> Full SmartDesk Access</li>
<li><i class="fas fa-check"></i> Unlimited Dashboard Tools</li>
<li><i class="fas fa-check"></i> Real-time Data Sync</li>
<li><i class="fas fa-check"></i> Secure Cloud Storage</li>
<li><i class="fas fa-check"></i> All Future Updates</li>
<li><i class="fas fa-check"></i> Customer Support</li>
        </ul>
        <button class="btn" id="trial-btn">Start Free Trial</button>
      </div>

      <div class="pricing-card" style="border: 2px solid var(--primary-color);">
        <div class="popular-badge">Most Popular</div>
        <h3>Professional</h3>
        <div class="price">₹99 <span>/ month</span></div>
        <ul class="features">

<li><i class="fas fa-check"></i> Full SmartDesk Access</li>
<li><i class="fas fa-check"></i> Unlimited Dashboard Tools</li>
<li><i class="fas fa-check"></i> Real-time Data Sync</li>
<li><i class="fas fa-check"></i> Secure Cloud Storage</li>
<li><i class="fas fa-check"></i> All Future Updates</li>
<li><i class="fas fa-check"></i> Customer Support</li>

        </ul>
        <button class="btn" id="monthly-btn">Get Started</button>
      </div>

      <div class="pricing-card">
        <h3>Enterprise</h3>
        <div class="price">₹999 <span>/ year</span></div>
        <ul class="features">
<li><i class="fas fa-check"></i> Full SmartDesk Access</li>
<li><i class="fas fa-check"></i> Unlimited Dashboard Tools</li>
<li><i class="fas fa-check"></i> Real-time Data Sync</li>
<li><i class="fas fa-check"></i> Secure Cloud Storage</li>
<li><i class="fas fa-check"></i> All Future Updates</li>
<li><i class="fas fa-check"></i> Customer Support</li>
        </ul>
        <button class="btn" id="yearly-btn">Contact Sales</button>
      </div>
    </div>

    <div class="faq-section">
      <h2>Frequently Asked Questions</h2>
      
      <div class="faq-item">
        <div class="faq-question" onclick="toggleFaq(this)">
          <span>What payment methods do you accept?</span>
          <i class="fas fa-chevron-down"></i>
        </div>
        <div class="faq-answer">
          <p>We accept all major credit cards (Visa, MasterCard, American Express), debit cards, UPI payments, and net banking through our secure payment gateway. All transactions are encrypted for your security.</p>
        </div>
      </div>
      
      <div class="faq-item">
        <div class="faq-question" onclick="toggleFaq(this)">
          <span>Can I upgrade or downgrade my plan later?</span>
          <i class="fas fa-chevron-down"></i>
        </div>
        <div class="faq-answer">
          <p>Yes, you can change your plan at any time. When you upgrade, you'll immediately gain access to the higher plan features. Downgrades will take effect at your next billing cycle.</p>
        </div>
      </div>
      
      <div class="faq-item">
        <div class="faq-question" onclick="toggleFaq(this)">
          <span>Is there a contract or long-term commitment?</span>
          <i class="fas fa-chevron-down"></i>
        </div>
        <div class="faq-answer">
          <p>No, all our plans are month-to-month or annual with no long-term contracts. You can cancel anytime with no penalty, though we'd appreciate feedback on how we could improve.</p>
        </div>
      </div>
      
      <div class="faq-item">
        <div class="faq-question" onclick="toggleFaq(this)">
          <span>What happens after my free trial ends?</span>
          <i class="fas fa-chevron-down"></i>
        </div>
        <div class="faq-answer">
          <p>After your 14-day trial, your account will automatically downgrade to our free limited version. You'll need to choose a paid plan to continue using all features. We'll send you reminders before your trial ends.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>
  
  <!-- Razorpay -->
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>

  <script>
    // Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyAEZzbOune3lfB2YFkYMSlg2CZJbAlGQdw",
      authDomain: "smartshopmanager59.firebaseapp.com",
      projectId: "smartshopmanager59",
      storageBucket: "smartshopmanager59.appspot.com",
      messagingSenderId: "697076760349",
      appId: "1:697076760349:web:484fd62ea3806a3f92ebf4"
    };
    
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);

    // DOM elements
    const successAlert = document.getElementById("success-alert");
    const errorAlert = document.getElementById("error-alert");
    const trialBtn = document.getElementById("trial-btn");
    const monthlyBtn = document.getElementById("monthly-btn");
    const yearlyBtn = document.getElementById("yearly-btn");
    const userNameElement = document.getElementById("user-name");
    const userEmailElement = document.getElementById("user-email");
    const userAvatarElement = document.getElementById("user-avatar");
    const timeDisplay = document.getElementById("time-display");
    const dateDisplay = document.getElementById("date-display");
    const themeToggle = document.getElementById("theme-toggle");

    // Check authentication state
    firebase.auth().onAuthStateChanged(async (user) => {
      if (!user) {
        window.location.href = "signin.html";
        return;
      }

      // Update user info in header
      updateUserInfo(user);

      const db = firebase.firestore();
      const userRef = db.collection("users").doc(user.uid);
      
      try {
        const doc = await userRef.get();

        if (doc.exists) {
          const userData = doc.data();
          
          // Handle trial status
          if (userData.trialStart) {
            trialBtn.disabled = true;
            trialBtn.textContent = "Trial Activated";
          }

          // Handle subscription status
          if (userData.subscription?.status === "active") {
            const currentDate = new Date();
            const endDate = new Date(userData.subscription.endDate);
            
            if (currentDate < endDate) {
              monthlyBtn.disabled = true;
              yearlyBtn.disabled = true;
              monthlyBtn.textContent = "Current Plan";
              yearlyBtn.textContent = "Current Plan";
            }
          }
        }
      } catch (error) {
        console.error("Error checking user status:", error);
        showError("Unable to verify your account status. Please refresh the page.");
      }
    });

    // Update user info in header
    function updateUserInfo(user) {
      if (user.displayName) {
        userNameElement.textContent = user.displayName;
        userAvatarElement.textContent = user.displayName.charAt(0).toUpperCase();
      } else {
        const emailName = user.email.split('@')[0];
        userNameElement.textContent = emailName;
        userAvatarElement.textContent = emailName.charAt(0).toUpperCase();
      }
      
      userEmailElement.textContent = user.email;
    }

    // Update time and date
    function updateDateTime() {
      const now = new Date();
      
      // Format time (HH:MM:SS)
      const timeString = now.toLocaleTimeString('en-IN', {
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit',
        hour12: false
      });
      
      // Format date (Day, DD Month YYYY)
      const dateString = now.toLocaleDateString('en-IN', {
        weekday: 'short',
        day: 'numeric',
        month: 'short',
        year: 'numeric'
      });
      
      timeDisplay.textContent = timeString;
      dateDisplay.textContent = dateString;
    }

    // Initialize time and update every second
    updateDateTime();
    setInterval(updateDateTime, 1000);

    // Theme toggle functionality
    themeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark-mode');
      
      if (document.body.classList.contains('dark-mode')) {
        localStorage.setItem('theme', 'dark');
        themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
        themeToggle.setAttribute('title', 'Toggle light mode');
      } else {
        localStorage.setItem('theme', 'light');
        themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
        themeToggle.setAttribute('title', 'Toggle dark mode');
      }
    });

    // Check for saved theme preference
    if (localStorage.getItem('theme') === 'dark') {
      document.body.classList.add('dark-mode');
      themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
      themeToggle.setAttribute('title', 'Toggle light mode');
    }

    // Trial button handler
    trialBtn.addEventListener("click", async () => {
      try {
        const user = firebase.auth().currentUser;
        if (!user) throw new Error("Not authenticated");

        // Show loading state
        trialBtn.disabled = true;
        trialBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';

        const db = firebase.firestore();
        const userRef = db.collection("users").doc(user.uid);

        await userRef.set({
          trialStart: new Date().toISOString(),
          subscription: { 
            status: "trial",
            plan: "trial",
            startDate: new Date().toISOString(),
            endDate: new Date(Date.now() + 14 * 24 * 60 * 60 * 1000).toISOString()
          }
        }, { merge: true });

        showSuccess("Your 14-day free trial has started! Redirecting to your dashboard...");
        
        setTimeout(() => {
          window.location.href = "dashboard.html";
        }, 2000);
      } catch (err) {
        trialBtn.disabled = false;
        trialBtn.textContent = "Start Free Trial";
        showError("Error starting trial: " + err.message);
      }
    });

    // Monthly subscription handler
    monthlyBtn.addEventListener("click", () => handlePayment("professional", 9900)); // ₹999 in paise

    // Yearly subscription handler
    yearlyBtn.addEventListener("click", () => handlePayment("enterprise", 99900)); // ₹9,999 in paise

    // Payment handler function
    function handlePayment(plan, amount) {
      const user = firebase.auth().currentUser;
      if (!user) {
        showError("Please sign in to subscribe");
        return;
      }

      // Set loading state
      const buttonId = plan === "professional" ? "monthly-btn" : "yearly-btn";
      const button = document.getElementById(buttonId);
      button.disabled = true;
      button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';

      const options = {
        key: "rzp_live_4WDsbQTlkpa06M", // Replace with your live Razorpay key
        amount: amount,
        currency: "INR",
        name: "SmartDesk ",
        description: `${plan.charAt(0).toUpperCase() + plan.slice(1)} Plan Subscription`,
        image: "https://ik.imagekit.io/yvulpdvff/SmartDesk%20Logo%20with%20Blues%20and%20Grays.png", // Your logo URL
        handler: async function(response) {
          try {
            const db = firebase.firestore();
            const userRef = db.collection("users").doc(user.uid);
            
            // Calculate subscription end date
            const endDate = new Date();
            endDate.setMonth(endDate.getMonth() + (plan === "professional" ? 1 : 12));

            // Update user subscription
            await userRef.set({
              subscription: {
                status: "active",
                plan: plan,
                startDate: new Date().toISOString(),
                endDate: endDate.toISOString(),
                paymentId: response.razorpay_payment_id,
                amount: amount / 100 // Convert back to rupees
              },
              trialStart: firebase.firestore.FieldValue.delete() // Remove trial if exists
            }, { merge: true });

            showSuccess("Payment successful! Your subscription is now active. Redirecting...");
            
            setTimeout(() => {
              window.location.href = "dashboard.html";
            }, 2000);
          } catch (err) {
            button.disabled = false;
            button.textContent = plan === "professional" ? "Get Started" : "Contact Sales";
            showError("Error processing your subscription: " + err.message);
          }
        },
        prefill: {
          name: user.displayName || "",
          email: user.email || "",
          contact: ""
        },
        theme: {
          color: "#4361ee"
        },
        modal: {
          ondismiss: function() {
            button.disabled = false;
            button.textContent = plan === "professional" ? "Get Started" : "Contact Sales";
          }
        }
      };

      const rzp = new Razorpay(options);
      rzp.open();
    }

    // FAQ toggle function
    function toggleFaq(element) {
      const answer = element.nextElementSibling;
      const icon = element.querySelector('i');
      
      answer.classList.toggle('active');
      
      if (answer.classList.contains('active')) {
        icon.classList.remove('fa-chevron-down');
        icon.classList.add('fa-chevron-up');
      } else {
        icon.classList.remove('fa-chevron-up');
        icon.classList.add('fa-chevron-down');
      }
    }

    // Alert functions
    function showSuccess(message) {
      successAlert.textContent = message;
      successAlert.style.display = "block";
      setTimeout(() => {
        successAlert.style.display = "none";
      }, 5000);
    }

    function showError(message) {
      errorAlert.textContent = message;
      errorAlert.style.display = "block";
      setTimeout(() => {
        errorAlert.style.display = "none";
      }, 5000);
    }
  </script>
</body>
</html>